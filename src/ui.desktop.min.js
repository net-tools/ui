window.nettools=window.nettools||{};nettools.ui=nettools.ui||{};nettools.ui.desktop=nettools.ui.desktop||{};nettools.ui.desktop.InputHelper=(function(){function _textAreaOnKeyDownTabBehavior(tab,e){var tab=tab||'    ';if((e||window.event).keyCode==9){if((e||window.event).shiftKey){var selection=this.value.substring(this.selectionStart,this.selectionEnd);if(this.selectionStart!=this.selectionEnd){nettools.ui.desktop.InputHelper.textareaSelectParagraph(this);var beforeSelection=this.value.substring(0,this.selectionStart);var afterSelection=this.value.substring(this.selectionEnd);var selection=this.value.substring(this.selectionStart,this.selectionEnd);selection=selection.replace(new RegExp('\n'+tab,'g'),'\n').replace(new RegExp('^'+tab,'g'),'');this.value=beforeSelection+selection+afterSelection;this.setSelectionRange(beforeSelection.length,beforeSelection.length+selection.length);if(typeof this.onchange==='function')
this.onchange();}else if(this.value.substr(this.selectionStart-tab.length,tab.length)==tab){var beforeSelection=this.value.substring(0,this.selectionStart-tab.length);var selection=this.value.substring(this.selectionStart,this.selectionEnd);var afterSelection=this.value.substring(this.selectionEnd);this.value=beforeSelection+selection+afterSelection;this.setSelectionRange(beforeSelection.length,beforeSelection.length+selection.length);if(typeof this.onchange==='function')
this.onchange();}}else{var selection=this.value.substring(this.selectionStart,this.selectionEnd);if(this.selectionStart!=this.selectionEnd){nettools.ui.desktop.InputHelper.textareaSelectParagraph(this);var beforeSelection=this.value.substring(0,this.selectionStart);var afterSelection=this.value.substring(this.selectionEnd);var selection=this.value.substring(this.selectionStart,this.selectionEnd);selection=tab+selection.replace(/\n/g,'\n'+tab);this.value=beforeSelection+selection+afterSelection;this.setSelectionRange(beforeSelection.length,beforeSelection.length+selection.length);if(typeof this.onchange==='function')
this.onchange();}else{var beforeSelection=this.value.substring(0,this.selectionStart);var afterSelection=this.value.substring(this.selectionEnd);var selection=this.value.substring(this.selectionStart,this.selectionEnd);this.value=beforeSelection+tab+selection+afterSelection;this.setSelectionRange(beforeSelection.length+tab.length,beforeSelection.length+tab.length+selection.length);if(typeof this.onchange==='function')
this.onchange();}}
this.focus();e.preventDefault();return!1}else return!0}
function _inputOnKeyDownNoCopyPasteBehavior(e){var kc=(e||window.event).keyCode;if((e||window.event).ctrlKey&&((kc==118)||(kc==86)||(kc==67)||(kc==99)))
return!1;else return!0}
function _inputOnKeyDownEscapeBehavior(userCb,e){var kc=(e||window.event).keyCode;if(kc==27){if(typeof userCb==='function')
userCb();return!1}else return!0}
return{textareaSelectParagraph:function(textarea,focusAfter){var beforeSelection=textarea.value.substring(0,textarea.selectionStart);if(textarea.value.substr(textarea.selectionStart-1,1)!='\n')
textarea.setSelectionRange(beforeSelection.lastIndexOf('\n')+1,textarea.selectionEnd);var afterSelection=textarea.value.substring(textarea.selectionEnd);if(textarea.value.substr(textarea.selectionEnd,1)!='\n'){var pos=afterSelection.indexOf('\n');if(pos!=-1)
textarea.setSelectionRange(textarea.selectionStart,textarea.selectionEnd+pos);else textarea.setSelectionRange(textarea.selectionStart,textarea.selectionEnd+afterSelection.length)}
if(focusAfter)
textarea.focus();},textareaTabBehavior:function(textarea,tab){nettools.ui.desktop.InputHelper.inputAddKeyBehavior(textarea,_textAreaOnKeyDownTabBehavior.bind(textarea,tab))},inputNoCopyPasteBehavior:function(input){nettools.ui.desktop.InputHelper.inputAddKeyBehavior(input,_inputOnKeyDownNoCopyPasteBehavior)},escapeBehavior:function(input,cb){nettools.ui.desktop.InputHelper.inputAddKeyBehavior(input,_inputOnKeyDownEscapeBehavior.bind(input,cb))},inputAddKeyBehavior:function(input,cb){nettools.jscore.addEvent(input,'onkeydown',cb)}}})();nettools.ui.desktop.Tabs=class{constructor(params){this.params=params}
output(container){if(container)
this.params.outputTo=container;else container=this.params.outputTo;this.params.orientation=this.params.orientation||'P';this.params.tabs=this.params.tabs||[];this.params.csrf=this.params.csrf||!1;this.params.id=this.params.id||container.id;if(this.params.orientation=='P')
this.params.portraitTabWidth=this.params.portraitTabWidth||'120px';var css='uiTabs'+this.params.orientation;container.classList.add(css+'Flex');var ul=document.createElement('ul');ul.className=css;if(this.params.orientation=='P')
ul.style.width=this.params.portraitTabWidth;var that=this;var onclick=function(e){that.selectTab(this);return!1};for(var i=0;i<this.params.tabs.length;i++){this.params.tabs[i].id=this.params.tabs[i].id||this.params.tabs[i].title;var li=document.createElement('li');li.id=this.params.id+'_'+this.params.tabs[i].id;li.innerHTML=this.params.tabs[i].title;li.onclick=onclick;ul.appendChild(li)}
container.appendChild(ul);var div=document.createElement('div');div.id=this.params.id+'Content';div.className='uiTabs'+this.params.orientation+'Content';for(var i=0;i<this.params.tabs.length;i++){var tab=document.createElement('div');tab.id=this.params.id+'_'+this.params.tabs[i].id+'Content';tab.style.visibility='hidden';tab.style.display='none';var iframe=document.createElement('iframe');iframe.src=this.params.tabs[i].url;iframe.frameBorder=0;iframe.marginHeight=0;iframe.marginWidth=0;iframe.style.width='100%';iframe.style.height='100%';tab.appendChild(iframe);div.appendChild(tab)}
container.appendChild(div);this.init()}
init(){var ul=this.params.outputTo.querySelector('ul');ul.firstChild.className="uiTabSelected";ul.setAttribute('data-selected',ul.firstChild.id);var tab=document.getElementById(ul.firstChild.id+"Content");tab.style.visibility="visible";tab.style.display="block"}
selectTab(tab){if(typeof tab=='string')
var target=document.getElementById(this.params.id+'_'+tab);else var target=tab;if(!target)
return;var ul=target.parentNode;var tab;if(target.className===""){if(tab=ul.getAttribute('data-selected')){document.getElementById(tab).className="";var tabc=document.getElementById(tab+"Content");tabc.style.visibility="hidden";tabc.style.display="none"}
target.className="uiTabSelected";ul.setAttribute('data-selected',target.id)}
tab=document.getElementById(target.id+"Content");tab.style.visibility="visible";tab.style.display="block";return tab}
getSelectedTabId(){return this.params.outputTo.querySelector('ul').getAttribute('data-selected')}
getTabContentNode(tab){if(typeof tab=='string')
var target=document.getElementById(this.params.id+'_'+tab);else var target=tab;if(!target)
return;return document.getElementById(target.id+"Content")}}
nettools.ui.desktop.dialogs={};nettools.ui.desktop.dialogs.Window=class{constructor(kind){this.node=null;this.nodecenter=null;this.kind=kind;this.content=null}
buttonsLine(){return `<div class="uiDialogButtons"><input type="button" value="${nettools.ui.desktop.dialog.i18n.BUTTON_OK}">&nbsp;&nbsp;&nbsp;<input type="button" value="${nettools.ui.desktop.dialog.i18n.BUTTON_CANCEL}"></div>`}
buildHTML(){return `<div class="uiDialogWrapper" style="visibility:hidden;">
	<div class="uiForm uiDialog ui${this.kind}Frame">
		<div class="uiDialogContent">${this.build()}</div>
		${this.buttonsLine()}
	</div>
</div>`}
build(){return''}
show(visible){if(visible===undefined)
visible=!0;this.nodecenter.style.visibility=visible?'visible':'hidden'}
hide(){this.show(!1)}
center(w,h,cssClass){this.node.style.height=null;this.node.style.width=null;this.node.classList.remove('uiDialogVCentered');this.node.classList.remove('uiDialogTopAligned');var css=this.node.getAttribute('data-customcss');if(css){var that=this;css.split(/ /).forEach(function(v){that.node.classList.remove(v)});this.node.removeAttribute('data-customcss')}
if(cssClass){var that=this;cssClass.split(/ /).forEach(function(v){that.node.classList.add(v)});this.node.setAttribute('data-customcss',cssClass)}
if(!w&&!h){this.node.className+=' uiDialogVCentered';return}
var hSizeObject=new nettools.ui.Size(h);var wSizeObject=new nettools.ui.Size(w);if(!hSizeObject.isNull())
if(hSizeObject.isPositive()){this.node.className+=' uiDialogVCentered';if(hSizeObject.size>0)
this.node.style.height=hSizeObject.toString();}else{this.node.className+=' uiDialogTopAligned';if(hSizeObject.size!=-1)
this.node.style.height=hSizeObject.negate().toString();}
if(!wSizeObject.isNull())
this.node.style.width=wSizeObject.toString();}
create(){document.body.insertAdjacentHTML('afterbegin',this.buildHTML());this.nodecenter=document.body.firstElementChild;this.node=this.nodecenter.firstElementChild;this.content=this.node.querySelector('.uiDialogContent')}
prepare(){this.create();return this}
execute(){throw new Error("'execute' method not defined")}}
nettools.ui.desktop.dialogs.OkCancelWindow=class extends nettools.ui.desktop.dialogs.Window{constructor(kind){super(kind);this.ok=null;this.cancel=null}
static _addHiddenSubmit(form,okbtn){form.onsubmit=function(){okbtn.onclick();return!1};var subm=form.ownerDocument.createElement('input');subm.type='submit';subm.style.display='none';subm.style.visibility='hidden';form.appendChild(subm)}
create(){super.create();this.ok=this.node.querySelectorAll('.uiDialogButtons input')[0];this.cancel=this.node.querySelectorAll('.uiDialogButtons input')[1]}
cancelDialog(cbcancel){if(cbcancel&&(typeof cbcancel==='function'))
cbcancel();}
validateDialog(cbv){return!0}
submitDialog(cb){if(cb&&(typeof cb==='function'))
cb();}
setButtonsEvents(cb,cbv,cbcancel){var that=this;this.ok.onclick=function(){if(that.validateDialog(cbv)){that.hide();that.submitDialog(cb);return!1}};if(this.cancel){this.cancel.onclick=function(){that.hide();that.cancelDialog(cbcancel)};nettools.ui.desktop.InputHelper.escapeBehavior(this.node,this.cancel.onclick)}}}
nettools.ui.desktop.dialogs.DialogWindow=class extends nettools.ui.desktop.dialogs.OkCancelWindow{constructor(kind){super(kind);this.iframe=null}
build(){return'<iframe frameborder="0" marginheight="0" marginwidth="0">...</iframe>'}
create(){super.create();this.iframe=this.node.querySelector('iframe');var that=this;this.iframe.onload=function(){var doc=this.contentDocument?this.contentDocument:this.contentWindow.document;if(doc&&doc.forms[0])
that.constructor._addHiddenSubmit(doc.forms[0],that.ok);}}
validateDialog(cbv){if(!cbv)
return!0;return cbv(this.iframe.contentDocument?this.iframe.contentDocument:this.iframe.contentWindow.document)}
submitDialog(cb){var doc=this.iframe.contentDocument?this.iframe.contentDocument:this.iframe.contentWindow.document;var sub=nettools.jscore.SubmitHandlers.Callback.toSubmitHandler(cb);sub.submit(doc.forms[0],doc.forms[0].elements)}
execute(src,w,h,cb,cbv,cbcancel,showCancel,cssClass){if(showCancel===undefined)
showCancel=!0;this.center(w,h,cssClass);this.setButtonsEvents(cb,cbv,cbcancel);if(!showCancel){this.cancel.style.visibility='hidden';this.cancel.style.display='none'}else{this.cancel.style.visibility='inherit';this.cancel.style.display='inline'}
this.iframe.src='';var that=this;window.setTimeout(function(){that.iframe.src=src},100);this.show()}}
nettools.ui.desktop.dialogs.CustomDialogWindow=class extends nettools.ui.desktop.dialogs.OkCancelWindow{validateDialog(cbv){if(!cbv)
return!0;return cbv(this.content)}
submitDialog(cb){if(cb&&(typeof cb==='function'))
cb(this.content);}
execute(html,w,h,cb,cbv,cbcancel,showCancel){if(showCancel===undefined)
showCancel=!0;this.content.innerHTML="";if(typeof html==='function')
html(this.content);else this.content.innerHTML=html;this.center(w,h);this.content.firstChild.style.marginTop='0px';this.setButtonsEvents(cb,cbv,cbcancel);if(!showCancel){this.cancel.style.visibility='hidden';this.cancel.style.display='none'}else{this.cancel.style.visibility='inherit';this.cancel.style.display='inline'}
var form=this.content.querySelector('form');if(form)
nettools.ui.desktop.dialogs.OkCancelWindow._addHiddenSubmit(form,this.ok);this.show();var input=this.content.querySelector('input');if(input&&(typeof input.focus=='function'))
input.focus();else this.ok.focus()}}
nettools.ui.desktop.dialogs.ConfirmWindow=class extends nettools.ui.desktop.dialogs.OkCancelWindow{constructor(kind){super(kind);this.lib=null}
build(){return'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAppJREFUeNqkU0tPE1EY/e7M7UyBaZnCQKJAQVqDxMdCfBAjSuIDfMa4NHHFRl0aXejGR9yZkGiMO6OGH+BCFJWFLMREEiNKxAgmUNu0lFLaQimlnZnrd6dTGNbe5LR37nfOud+ce4cwxuB/BrV+dr8BEEQAIlAg5AAunUUEETU2bxHxBzEIjI0BM3UwDdAnzpQM7KECsOstjeqpgx1Nfq2mqlqWqMwL+by+Np/MZsa+hU/8jaSHcKkfkV7vAIcbXW91dbZe3NlW3xqNJoRHd7c4O5VvP1msV48EtYlfc+qXryFufId7C6W6ebwtqPUEW9RAPJ4SdN2AxwOTFt59ilmMYIMAyWRaCLR4A9ua1B6u2ejANHp3tdf7Y7EFUg51cLQI2ewKHN6zCHUVUZiaTsP4eAYopUTz1fpnZo1eTrMMmKEHJAreVKEAfPd0Jgu51VXo2OGGSyc1mJzJwauRHAgYiYn8YrHg5RpHBzou6pDLFyGznAcTWUSkcO+K3yo/eBEHKivrgZjgsjROg5n5hZXllYKoilIViDbx/I2Q9S9V+jadfT6/tsw1fF4K0TCGfv+MhD1elUluD3AQIsDo870W+Ly87pIVFg8vhLnG2cHwXCTWXaEoytbWYLOBN8p5Q6lUiUIPvpppRqanQulEYhhfcpjXrNTF5mf8JHyY5s1qre50Y1t7g+LTPC7ZLeP260Y/Pn74vpRMvMWAHuLNTRmhvpIBQRLxngOi9FDcphMv1QXkb0fU8k24uPvytUMjA08/g0iPsux7nS29BktbNigPIuEn4ApsJMZMEUjjMWzzvvWce9nJSvltMiB2Hi4eug3ZhsuC2LUPhP1Xodjfh88pRBK1OaeBYEO0QR3zco3zDH6SvBfUFv8JMAAv8hiRfYAaWQAAAABJRU5ErkJggg==" height="16" width="16" align="absmiddle"> <span class="uiPromptLib"></span>'}
create(){super.create();this.lib=this.node.querySelector('span.uiPromptLib')}
execute(lib,cb,w,h,cbcancel){this.lib.innerHTML=lib;this.center(w,(h!=nettools.ui.desktop.dialog.ALIGN_DEFAULT)?h:nettools.ui.desktop.dialog.ALIGN_TOP);this.setButtonsEvents(cb,null,cbcancel);this.show();this.ok.focus()}}
nettools.ui.desktop.dialogs.NotifyWindow=class extends nettools.ui.desktop.dialogs.ConfirmWindow{build(){return'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAjBJREFUeNqkk0trE1EUx8/cO49OfGTSRNJMYsA0aVonoYh13YW71uJCKFQhKqibfgFLwYULsR/AhY+VG1d+C124kJiFIGipmoIZNUXtZDKTycz1njGpaRNU8MJv7txzzv/c5xEYY/A/TRQEAW5c5KwM+aKcR73/a5zvg84HT371wv07Apwuj0x+PZW/vArA4NO7x/f4+OGoIHLKAAiC/fBdHadSbCGZPTeTzC7OUElbQNvBOISMMnIqeqFSYs57mTkfZD1/qYS2f0rAZ5pVDmXnY/FSbn3jM6xvfAEtfjKnRDLz6BtK4PPPADi+ms6vGK71lti2DUintUVSJ84b6OvF7GlI4PNMPVgAZ49oxpyqRnXf+wGWZYX4ngWRiKYfPpqfw5hBjej7eweqCkSo6JOLhmd/hI7vQLVaBdM0YXt1FgK2CeJ40fCbmxUWsGc8vh3egtcFQPhyLsQnzpQJcbVmuw5mawtqtRo0Gg3wJQeY7ALIrqZEM2WM7esIPkROAgR5OZEpTTV3X4IXNEGiLnw1b4fItBNCBQuiqeQUA7qMGtSSLt8C38aVRLo47QVvVJFYoFAnJJG8FdIfI6rSVWMTx6ZRg1rS7UKeSspSMj2Wk+AbjPGZ+vTboA1JZbQcEcUl1Iq2zdZyxURBpruUMTzR38Vl79wM+9bO0/3vlwLVs+OF16/MNdFug/vi+Xadm+vDL/3uHyuR16Er4E3gKvEaOTLa/1LBuEQPF8hxfgowAINnMqTBUH7hAAAAAElFTkSuQmCC" height="16" width="16" align="absmiddle"> <span class="uiPromptLib"></span>'}
create(){super.create();this.cancel.style.visibility='hidden';this.cancel.style.display='none'}
execute(lib,cb,w,h){super.execute(lib,cb,w,h,null)}}
nettools.ui.desktop.dialogs.PromptWindow=class extends nettools.ui.desktop.dialogs.OkCancelWindow{constructor(kind){super(kind);this.lib=null;this.input=null;this.form=null}
build(){return'<div class="uiPromptLib"></div><form><input type="text" name="value" class="uiPromptValue"></form>'}
create(){super.create();this.lib=this.node.querySelector('div.uiPromptLib');this.input=this.node.querySelector('input.uiPromptValue');this.form=this.node.querySelector('form');this.constructor._addHiddenSubmit(this.form,this.ok)}
submitDialog(cb){if(cb){if(typeof cb==='function'){var cbold=cb;cb=new nettools.jscore.SubmitHandlers.Callback({target:function(form,elements){cbold(elements[0].value)}})}}else cb=new nettools.jscore.SubmitHandlers.Callback.dummy();cb.submit(this.form,[this.input])}
execute(lib,defvalue,cb,cbcancel){this.lib.innerHTML=lib;this.input.value=defvalue;this.center(nettools.ui.desktop.dialog.ALIGN_DEFAULT,nettools.ui.desktop.dialog.ALIGN_TOP);this.setButtonsEvents(cb,null,cbcancel);this.show();this.input.focus()}}
nettools.ui.desktop.dialogs.TextAreaWindow=class extends nettools.ui.desktop.dialogs.PromptWindow{build(){return'<div class="uiTextAreaLib"></div><form><textarea class="uiTextAreaValue"></textarea></form>'}
create(){super.create();this.lib=this.node.querySelector('div.uiTextAreaLib');this.input=this.node.querySelector('textarea')}
execute(lib,defvalue,cb,textareacssclass,cbcancel){this.lib.innerHTML=lib;this.input.value=defvalue;this.input.className='uiPromptValue '+textareacssclass;this.center(nettools.ui.desktop.dialog.ALIGN_DEFAULT,nettools.ui.desktop.dialog.ALIGN_CENTER);this.setButtonsEvents(cb,null,cbcancel);this.show();this.input.focus()}}
nettools.ui.desktop.dialogs.DynamicFormWindow=class extends nettools.ui.desktop.dialogs.OkCancelWindow{constructor(kind){super(kind);this.form=null}
build(){return'<form></form>'}
create(){super.create();this.form=this.node.querySelector('form')}
execute(params,formClassName,w,h,onload){params.target=this.form;params.target.innerHTML="";var btns=this.node.querySelector('div.uiDialogButtons');if(btns)
btns.parentNode.removeChild(btns);params.target.className='uiForm';if(formClassName)
formClassName.split(/ /).forEach(function(v){params.target.classList.add(v)});var that=this;params.submit=nettools.jscore.SubmitHandlers.Callback.toSubmitHandler(params.submit).customEvent(function(form,elements){that.hide()});var cbcancel=params.cancel;params.cancel=function(form){if(typeof cbcancel==='function')
cbcancel(form);that.hide()};nettools.ui.FormBuilder.createForm(params);this.center(w,h);params.target.firstChild.style.marginTop='0px';var btns=params.target.querySelector('.FormBuilderButtons');btns.className='uiDialogButtons';this.node.appendChild(btns);btns.insertBefore(document.createTextNode('\u00A0\u00A0\u00A0'),btns.lastChild);btns.firstChild.onclick=params.target.onsubmit;nettools.ui.desktop.dialogs.OkCancelWindow._addHiddenSubmit(params.target,btns.firstChild);nettools.ui.desktop.InputHelper.escapeBehavior(params.target,params.cancel);this.show();if(params.target.elements[0].focus)
params.target.elements[0].focus();if(typeof onload=='function')
onload(params.target,params.target.elements);}}
nettools.ui.desktop.dialogs.RichEditWindow=class extends nettools.ui.desktop.dialogs.OkCancelWindow{constructor(kind){super(kind);this.textarea=null;this.editor=null}
build(){return'<form><textarea style="visibility:hidden;" name="dialog_rte"></textarea></form>'}
create(){super.create();this.textarea=this.node.querySelector('textarea')}
cancelDialog(cbcancel){try{this.editor.remove();this.editor=null}catch(e){}
super.cancelDialog(cbcancel)}
submitDialog(cb){var value=this.editor.getContent();try{this.editor.remove();this.editor=null}catch(e){}
if(cb&&(typeof cb==='function'))
cb(value);}
execute(def,w,h,cb,cbcancel){function _i18n(params){if(nettools.ui.desktop.dialog.i18n.TINYMCE_LANGUAGE!='en'){params.language=nettools.ui.desktop.dialog.i18n.TINYMCE_LANGUAGE;params.language_url=nettools.ui.desktop.dialog.i18n.TINYMCE_LANGUAGE_URL}
return params}
if(!window.tinymce){nettools.ui.desktop.dialog.prompt('TINYMCE missing !',def,cb,!0);return}
this.node.classList.remove('uiDialogVCentered');this.node.classList.remove('uiDialogTopAligned');this.node.classList.remove('uiRichEditFrameWMax');this.node.style.width=null;if(!w)
this.node.className+=' uiRichEditFrameWMax';else this.node.style.width=new nettools.ui.Size(w).toString();var hObject=new nettools.ui.Size(h);if(hObject.isNull()||hObject.isPositive()||(hObject.unit!='px'))
this.node.className+=' uiDialogVCentered';if(hObject.isNegative()&&(hObject.unit=='px')){this.node.className+=' uiDialogTopAligned';hObject=hObject.negate()}
if(hObject.unit!='px')
hObject=new nettools.ui.Size(null);this.textarea.value=def;var that=this;tinymce.init(_i18n({target:this.textarea,height:(hObject.isNull()?(window.innerHeight-140):hObject.size)+'px',remove_script_host:!1,relative_urls:!1,plugins:"lists advlist anchor autolink charmap code fullscreen link nonbreaking paste print preview quickbars searchreplace visualblocks visualchars",toolbar:'undo redo | forecolor backcolor bold italic | alignleft aligncenter alignright alignjustify | outdent indent bullist numlist | preview code | charmap nonbreaking'})).then(function(editors){that.editor=editors[0];that.setButtonsEvents(cb,null,cbcancel)});this.show()}}
nettools.ui.desktop.dialog=nettools.ui.desktop.dialog||(function(){const CONFIRM="Confirm";const RICHEDIT="RichEdit";const DIALOG="Dialog";const DYNAMICFORM="DynamicForm";const CUSTOMDIALOG="CustomDialog";const PROMPT="Prompt";const TEXTAREA="TextArea";const NOTIFY="Notify";var _divs={};function _get(div){return _divs[div]||(_divs[div]=_createContent(div))}
function _createContent(div){var construct=nettools.ui.desktop.dialogs[div+'Window'];if(!construct)
throw new Error(`Class constructor '${div}' for dialog window not found`);return new construct(div).prepare()}
return{ALIGN_CENTER:0,ALIGN_DEFAULT:null,ALIGN_TOP:-1,alignTop:function(h){var size=new nettools.ui.Size(h);if(size.isPositive())
return size.negate().toString();else return size.toString()},center:function(h){var size=new nettools.ui.Size(h);if(size.isNegative())
return size.negate().toString();else return size.toString()},richEditPromise:function(def,w,h){return new Promise(function(resolve,reject){nettools.ui.desktop.dialog.richEdit(def,w,h,resolve,reject)})},richEdit:function(def,w,h,cb,cbcancel){_get(RICHEDIT).execute(def,w,h,cb,cbcancel)},notifyPromise:function(lib,w,h){return new Promise(function(resolve,reject){nettools.ui.desktop.dialog.notify(lib,resolve,w,h)})},notify:function(lib,cb,w,h){_get(NOTIFY).execute(lib,cb,w,h)},confirmPromise:function(lib,w,h){return new Promise(function(resolve,reject){nettools.ui.desktop.dialog.confirm(lib,resolve,w,h,reject)})},confirm:function(lib,cb,w,h,cbcancel){_get(CONFIRM).execute(lib,cb,w,h,cbcancel)},showPromise:function(src,w,h,cbv,showCancel,cssClass){return new Promise(function(resolve,reject){nettools.ui.desktop.dialog.show(src,w,h,function(f,e,d){resolve({form:f,elements:e})},cbv,reject,showCancel,cssClass)})},show:function(src,w,h,cb,cbv,cbcancel,showCancel,cssClass){_get(DIALOG).execute(src,w,h,cb,cbv,cbcancel,showCancel,cssClass)},showAndSubmit:function(src,w,h,cbv,cbcancel,showCancel,cssClass){nettools.ui.desktop.dialog.show(src,w,h,new nettools.jscore.SubmitHandlers.Post({target:src}),function(doc){if(cbv&&(typeof cbv==='function'))
return cbv(doc);else return!0},cbcancel,showCancel,cssClass)},dynamicForm:function(params,formClassName,w,h,onload){_get(DYNAMICFORM).execute(params,formClassName,w,h,onload)},customDialogPromise:function(html,w,h,cbv,showCancel){return new Promise(function(resolve,reject){nettools.ui.desktop.dialog.customDialog(html,w,h,resolve,cbv,reject,showCancel)})},customDialog:function(html,w,h,cb,cbv,cbcancel,showCancel){_get(CUSTOMDIALOG).execute(html,w,h,cb,cbv,cbcancel,showCancel)},customNotifyPromise:function(html,w,h){return new Promise(function(resolve,reject){nettools.ui.desktop.dialog.customNotify(html,w,h,resolve)})},customNotify:function(html,w,h,cb){if(!w){var tmp=document.createElement('div');tmp.className='uiNotifyFrame';tmp.style.display='none';tmp.style.visibility='hidden';document.body.appendChild(tmp);w=getComputedStyle(tmp).width;document.body.removeChild(tmp);tmp=null}
nettools.ui.desktop.dialog.customDialog(html,w,(h!=nettools.ui.desktop.dialog.ALIGN_DEFAULT)?h:nettools.ui.desktop.dialog.ALIGN_TOP,cb,null,null,!1)},promptPromise:function(lib,defvalue,textarea,textareacssclass){return new Promise(function(resolve,reject){nettools.ui.desktop.dialog.prompt(lib,defvalue,resolve,textarea,textareacssclass,reject)})},prompt:function(lib,defvalue,cb,textarea,textareacssclass,cbcancel){if(textarea)
_get(TEXTAREA).execute(lib,defvalue,cb,textareacssclass,cbcancel);else _get(PROMPT).execute(lib,defvalue,cb,cbcancel)}}})();nettools.ui.desktop.dialog.i18n={BUTTON_OK:' OK ',BUTTON_CANCEL:'Cancel',TINYMCE_LANGUAGE:'en',TINYMCE_LANGUAGE_URL:'undefined'}